<?xml version="1.0" encoding="UTF-8"?>
<!doctype html>
<html>
	<head>
		<style type="text/css">
			h2 {
				font: -apple-system-headline;
			}
			body {
				font: -apple-system-body;
				zoom: 1.2;
			}
			img {
				width: auto;
				height : auto;
				max-height: 100%;
				max-width: 100%;
			}
		</style>
	</head>
	<body>
		<h2>A Branchless UTF-8 Decoder</h2>
		<p><a href="http://nullprogram.com/blog/2017/10/06/">Chris Wellons</a> (via <a href="https://twitter.com/matiasgoldberg/status/948745881695682560">Matías N. Goldberg</a>):</p> 
<blockquote> 
<p>The CPU must correctly predict the length of the code point or else it will suffer a hazard. An incorrect guess will stall the pipeline and slow down decoding.</p> 
<p>[…]</p> 
<p>This reads four bytes regardless of the actual length. Avoiding doing something is branching, so this can’t be helped. The unneeded bits are shifted out based on the length. That’s all it takes to decode UTF-8 without branching.</p> 
</blockquote>
	</body>
</html>
